!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var n=function(){function t(t,e){this.x=t,this.y=e,this.magnitude=Math.sqrt(t^2+e^2)}return t.prototype.set=function(t,e){this.x=t,this.y=e,this.magnitude=Math.sqrt(t^2+e^2)},t.prototype.setMag=function(t){var e=Math.atan2(this.y,this.x);this.x=Math.cos(e)*t,this.y=Math.sin(e)*t,this.magnitude=t},t.prototype.heading=function(){return Math.atan2(this.y,this.x)},t.prototype.mult=function(t){this.x=this.x*t,this.y=this.y*t},t.add=function(e,i){return new t(e.x+i.x,e.y+i.y)},t.sub=function(e,i){return new t(e.x-i.x,e.y-i.y)},t}(),s=function(){function t(t,e,i,s,h){this.a=new n(t,e),this.len=i,this.angle=s;var a=this.len*Math.cos(this.angle),o=this.len*Math.sin(this.angle);this.b=new n(this.a.x+a,this.a.y+o),void 0!==h?(this.parent=h,this.a=new n(this.parent.b.x,this.parent.b.y)):this.parent=null,this.calculateB()}return t.prototype.follow=function(t,e,i){var s=new n(t,e),h=n.sub(s,this.a);this.angle=h.heading(),null!==this.parent?(h.setMag(this.len),h.mult(-1),this.a=n.add(s,h)):void 0!==i&&(i.a.x=this.b.x,i.a.y=this.b.y)},t.prototype.calculateB=function(){var t=this.len*Math.cos(this.angle),e=this.len*Math.sin(this.angle);this.b.set(this.a.x+t,this.a.y+e)},t.prototype.update=function(){this.calculateB()},t.prototype.draw=function(t){t.beginPath(),t.moveTo(this.a.x,this.a.y),t.lineTo(this.b.x,this.b.y),t.stroke()},t}(),h=function(){function t(t,e,i,n){this.len=i.len+n.len,this.reachCount=25,this.targetX=t,this.targetY=e,this.seg1=i,this.seg2=n}return t.prototype.reach=function(){this.reachCount>0&&(this.reachCount--,this.targetX+=2)},t.prototype.update=function(){this.seg1.a.x++,this.seg2.follow(this.targetX,this.targetY),this.seg2.update(),this.seg1.follow(this.seg2.a.x,this.seg2.a.y,this.seg2),this.seg1.update(),function(t,e){var i=e.b.x-t.a.x,n=e.b.y-t.a.y;return Math.sqrt(i*i+n*n)}(this.seg1,this.seg2)>this.len&&(this.reachCount=70),this.reach()},t.prototype.draw=function(t){this.seg1.draw(t),this.seg2.draw(t)},t}(),a=function(){function t(t,e,i,n){this.ticks=1,this.x=t,this.y=e,this.h=i,this.w=n,this.legs=[];var a=new s(this.x+this.w,this.y,20,225*Math.PI/180),o=new s(0,0,20,0,a),r=new s(this.x+this.w,this.y+this.h,20,90*Math.PI/180),u=new s(0,0,20,0,r),l=new s(this.x,this.y+this.h,20,90*Math.PI/180),c=new s(0,0,20,0,r),f=new s(this.x,this.y,20,225*Math.PI/180),p=new s(0,0,20,0,a);this.legs.push(new h(t+this.w+10,e-5,a,o)),this.legs.push(new h(t-this.w-10,e+this.h+5,r,u)),this.legs.push(new h(t-this.w-10,e+this.h+5,l,c)),this.legs.push(new h(t-this.w+10,e-5,f,p))}return t.prototype.update=function(){this.ticks++,this.x++,this.legs.forEach(function(t){t.update()})},t.prototype.draw=function(t){t.fillStyle="grey",t.fillRect(this.x,this.y,this.w,this.h),this.legs.forEach(function(e){e.draw(t)})},t}();var o=document.getElementById("gameScreen"),r=o.getContext("2d"),u=o.getBoundingClientRect(),l=0,c=0,f=new s(300,200,100,0),p=new s(0,0,100,0,f),y=new a(0,250,25,25);setInterval(function(){y.update(),p.follow(c,l),p.update(),f.follow(p.a.x,p.a.y,p),f.update(),r.clearRect(0,0,o.width,o.height),y.draw(r),f.draw(r),p.draw(r)},12),o.addEventListener("mousemove",function(t){c=(t.clientX-u.left)/(u.right-u.left)*o.width,l=(t.clientY-u.top)/(u.bottom-u.top)*o.height},!1)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL1BWZWN0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1NlZ21lbnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0VudGl0eS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJQVmVjdG9yIiwiWCIsIlkiLCJ0aGlzIiwieCIsInkiLCJtYWduaXR1ZGUiLCJNYXRoIiwic3FydCIsInNldCIsInNldE1hZyIsIk1hZ25pdHVkZSIsImFuZ2xlIiwiYXRhbjIiLCJjb3MiLCJzaW4iLCJoZWFkaW5nIiwibXVsdCIsIk11bHRpcGxlIiwiYWRkIiwiQSIsIkIiLCJzdWIiLCJTZWdtZW50X1NlZ21lbnQiLCJTZWdtZW50IiwiTGVuIiwiQW5nbGUiLCJQYXJlbnQiLCJhIiwibGVuIiwiZHgiLCJkeSIsImIiLCJ1bmRlZmluZWQiLCJwYXJlbnQiLCJjYWxjdWxhdGVCIiwiZm9sbG93IiwidGFyZ2V0WCIsInRhcmdldFkiLCJjaGlsZCIsInRhcmdldCIsImRpciIsInVwZGF0ZSIsImRyYXciLCJjdHgiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJsaW5lVG8iLCJzdHJva2UiLCJMZWciLCJTZWcxIiwiU2VnMiIsInJlYWNoQ291bnQiLCJzZWcxIiwic2VnMiIsInJlYWNoIiwidjEiLCJ2MiIsImNhbGN1bGF0ZUxlZ0Rpc3RhbmNlIiwiRW50aXR5X0VudGl0eSIsIkVudGl0eSIsIkgiLCJXIiwidGlja3MiLCJoIiwidyIsImxlZ3MiLCJsZWcxc2VnMSIsIlBJIiwibGVnMXNlZzIiLCJsZWcyc2VnMSIsImxlZzJzZWcyIiwibGVnM3NlZzEiLCJsZWczc2VnMiIsImxlZzRzZWcxIiwibGVnNHNlZzIiLCJwdXNoIiwiZm9yRWFjaCIsImxlZyIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwiY2FudmFzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRleHQiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwibW91c2VZIiwibW91c2VYIiwiZW50Iiwic2V0SW50ZXJ2YWwiLCJjbGVhclJlY3QiLCJ3aWR0aCIsImhlaWdodCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJjbGllbnRYIiwibGVmdCIsInJpZ2h0IiwiY2xpZW50WSIsInRvcCIsImJvdHRvbSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FO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Q1AsR0FBVU8sRUFBSUMsUUFBVVgsRUFBS1ksT0FBU1osRUFBS2EsTUFBUWIsRUFBS1ksTUFBUWhCLEVBQU9XLE1BQ3ZFTCxHQUFVUSxFQUFJSSxRQUFVZCxFQUFLZSxNQUFRZixFQUFLZ0IsT0FBU2hCLEVBQUtlLEtBQU9uQixFQUFPWSxTQUN2RSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCIvKiogaW1wbGVtZW50YXRpb24gb2YgSmF2YSdzIFByb2Nlc3NpbmcgUFZlY3RvciAqL1xyXG5leHBvcnQgY2xhc3MgUFZlY3RvciB7XHJcbiAgICB4OiBudW1iZXI7XHJcbiAgICB5OiBudW1iZXI7XHJcbiAgICBtYWduaXR1ZGU6IG51bWJlcjtcclxuICAgIGNvbnN0cnVjdG9yKFg6IG51bWJlciwgWTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy54ID0gWDtcclxuICAgICAgICB0aGlzLnkgPSBZO1xyXG4gICAgICAgIHRoaXMubWFnbml0dWRlID0gTWF0aC5zcXJ0KChYXjIgKyBZXjIpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogc2V0IHggYW5kIHkgd2l0aG91dCBhbGxvY2F0aW5nIG5ldyBQVmVjdG9yICovXHJcbiAgICBzZXQoWDogbnVtYmVyLCBZOiBudW1iZXIpIDogdm9pZCB7XHJcbiAgICAgICAgdGhpcy54ID0gWDtcclxuICAgICAgICB0aGlzLnkgPSBZO1xyXG4gICAgICAgIHRoaXMubWFnbml0dWRlID0gTWF0aC5zcXJ0KChYXjIgKyBZXjIpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogc2V0cyB0aGUgbWFnbml0dWRlIChsZW5ndGgpIG9mIHZlY3RvclxyXG4gICAgICogIGZpbmRzIG5ldyB4IGFuZCB5IGNvb3JkaW5hdGVzXHJcbiAgICAgKi9cclxuICAgIHNldE1hZyhNYWduaXR1ZGU6IG51bWJlcikgOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBhbmdsZSA9IE1hdGguYXRhbjIodGhpcy55LCB0aGlzLngpO1xyXG4gICAgICAgIHRoaXMueCA9IE1hdGguY29zKGFuZ2xlKSAqIE1hZ25pdHVkZTtcclxuICAgICAgICB0aGlzLnkgPSBNYXRoLnNpbihhbmdsZSkgKiBNYWduaXR1ZGU7XHJcbiAgICAgICAgdGhpcy5tYWduaXR1ZGUgPSBNYWduaXR1ZGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIHJldHVybnMgYW5nbGUgb2YgdmVjdG9yICovXHJcbiAgICBoZWFkaW5nKCkgOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmF0YW4yKHRoaXMueSwgdGhpcy54KTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogbXVsdGlwbGllcyB0aGUgY29tcG9uZW50cyBvZiB0aGUgdmVjIGJ5IHNvbWUgbnVtYmVyICAqL1xyXG4gICAgbXVsdChNdWx0aXBsZTogbnVtYmVyKSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMueCA9IHRoaXMueCAqIE11bHRpcGxlO1xyXG4gICAgICAgIHRoaXMueSA9IHRoaXMueSAqIE11bHRpcGxlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiByZXR1cm5zIG5ldyB2ZWMgb2YgdmVjIEEgcGx1cyB2ZWMgQiAqL1xyXG4gICAgc3RhdGljIGFkZChBOiBQVmVjdG9yLCBCOiBQVmVjdG9yKSA6IFBWZWN0b3Ige1xyXG4gICAgICAgIGNvbnN0IHggPSBBLnggKyBCLng7XHJcbiAgICAgICAgY29uc3QgeSA9IEEueSArIEIueTtcclxuICAgICAgICByZXR1cm4gbmV3IFBWZWN0b3IoeCwgeSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIHJldHVybnMgbmV3IHZlYyBvZiB2ZWMgQiBzdWJ0cmFjdGVkIGZyb20gdmVjIEEgKi9cclxuICAgIHN0YXRpYyBzdWIoQTogUFZlY3RvciwgQjogUFZlY3RvcikgOiBQVmVjdG9yIHtcclxuICAgICAgICBjb25zdCB4ID0gQS54IC0gQi54O1xyXG4gICAgICAgIGNvbnN0IHkgPSBBLnkgLSBCLnk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQVmVjdG9yKHgsIHkpXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBQVmVjdG9yIH0gZnJvbSBcIi4vUFZlY3RvclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNlZ21lbnQge1xyXG4gICAgYTogUFZlY3RvcjtcclxuICAgIGFuZ2xlOiBudW1iZXI7XHJcbiAgICBsZW46IG51bWJlcjtcclxuICAgIGI6IFBWZWN0b3I7XHJcbiAgICBwYXJlbnQ6IFNlZ21lbnQ7XHJcbiAgICBjb25zdHJ1Y3RvcihYOiBudW1iZXIsIFk6IG51bWJlciwgTGVuOiBudW1iZXIsIEFuZ2xlOiBudW1iZXIsIFBhcmVudD86IFNlZ21lbnQpIHtcclxuICAgICAgICB0aGlzLmEgPSBuZXcgUFZlY3RvcihYLCBZKTtcclxuICAgICAgICB0aGlzLmxlbiA9IExlbjtcclxuICAgICAgICB0aGlzLmFuZ2xlID0gQW5nbGU7XHJcblxyXG4gICAgICAgIGNvbnN0IGR4OiBudW1iZXIgPSB0aGlzLmxlbiAqIE1hdGguY29zKHRoaXMuYW5nbGUpO1xyXG4gICAgICAgIGNvbnN0IGR5OiBudW1iZXIgPSB0aGlzLmxlbiAqIE1hdGguc2luKHRoaXMuYW5nbGUpO1xyXG4gICAgICAgIHRoaXMuYiA9IG5ldyBQVmVjdG9yKHRoaXMuYS54ICsgZHgsIHRoaXMuYS55ICsgZHkpO1xyXG5cclxuICAgICAgICBpZiAoUGFyZW50ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBQYXJlbnRcclxuICAgICAgICAgICAgdGhpcy5hID0gbmV3IFBWZWN0b3IodGhpcy5wYXJlbnQuYi54LCB0aGlzLnBhcmVudC5iLnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVCKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZm9sbG93KHRhcmdldFg6IG51bWJlciwgdGFyZ2V0WTogbnVtYmVyLCBjaGlsZD86IFNlZ21lbnQpIHtcclxuICAgICAgICBsZXQgdGFyZ2V0ID0gbmV3IFBWZWN0b3IodGFyZ2V0WCwgdGFyZ2V0WSk7XHJcbiAgICAgICAgbGV0IGRpciA9IFBWZWN0b3Iuc3ViKHRhcmdldCwgdGhpcy5hKTtcclxuICAgICAgICB0aGlzLmFuZ2xlID0gZGlyLmhlYWRpbmcoKTtcclxuXHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBhcmVudCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBkaXIuc2V0TWFnKHRoaXMubGVuKTtcclxuICAgICAgICAgICAgZGlyLm11bHQoLTEpO1xyXG4gICAgICAgICAgICB0aGlzLmEgPSBQVmVjdG9yLmFkZCh0YXJnZXQsIGRpcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoY2hpbGQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5hLnggPSBjaGlsZC5iLng7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmEueSA9IGNoaWxkLmIueTtcclxuICAgICAgICAgICAgICAgIGNoaWxkLmEueCA9IHRoaXMuYi54O1xyXG4gICAgICAgICAgICAgICAgY2hpbGQuYS55ID0gdGhpcy5iLnk7XHJcbiAgICAgICAgICAgICAgICAvLyBjaGlsZC5hLnNldE1hZyhNYXRoLnNxcnQoKHRoaXMuYS54KV4yICsgKHRoaXMuYS55KV4yKSk7XHJcbiAgICAgICAgICAgICAgICAvLyBjaGlsZC5iLnNldE1hZyhNYXRoLnNxcnQoKHRoaXMuYi54KV4yICsgKHRoaXMuYi55KV4yKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2FsY3VsYXRlQigpIDogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgZHg6IG51bWJlciA9IHRoaXMubGVuICogTWF0aC5jb3ModGhpcy5hbmdsZSk7XHJcbiAgICAgICAgY29uc3QgZHk6IG51bWJlciA9IHRoaXMubGVuICogTWF0aC5zaW4odGhpcy5hbmdsZSk7XHJcbiAgICAgICAgdGhpcy5iLnNldCh0aGlzLmEueCArIGR4LCB0aGlzLmEueSArIGR5KTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoKSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY2FsY3VsYXRlQigpO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXcoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIDogdm9pZCB7XHJcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGN0eC5tb3ZlVG8odGhpcy5hLngsIHRoaXMuYS55KTtcclxuICAgICAgICBjdHgubGluZVRvKHRoaXMuYi54LCB0aGlzLmIueSk7XHJcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgU2VnbWVudCB9IGZyb20gXCIuL1NlZ21lbnRcIjtcclxuXHJcbmNsYXNzIExlZyB7XHJcbiAgICB0YXJnZXRYOiBudW1iZXI7XHJcbiAgICB0YXJnZXRZOiBudW1iZXI7XHJcbiAgICBsZW46IG51bWJlcjtcclxuICAgIHJlYWNoQ291bnQ6IG51bWJlcjtcclxuICAgIHNlZzE6IFNlZ21lbnQ7XHJcbiAgICBzZWcyOiBTZWdtZW50O1xyXG4gICAgY29uc3RydWN0b3IoWDogbnVtYmVyLCBZOiBudW1iZXIsIFNlZzE6IFNlZ21lbnQsIFNlZzI6IFNlZ21lbnQpIHtcclxuICAgICAgICB0aGlzLmxlbiA9IFNlZzEubGVuICsgU2VnMi5sZW47XHJcbiAgICAgICAgdGhpcy5yZWFjaENvdW50ID0gMjU7XHJcbiAgICAgICAgdGhpcy50YXJnZXRYID0gWDtcclxuICAgICAgICB0aGlzLnRhcmdldFkgPSBZO1xyXG4gICAgICAgIHRoaXMuc2VnMSA9IFNlZzE7XHJcbiAgICAgICAgdGhpcy5zZWcyID0gU2VnMjtcclxuICAgIH1cclxuXHJcbiAgICByZWFjaCgpIHtcclxuICAgICAgICBpZiAodGhpcy5yZWFjaENvdW50ID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlYWNoQ291bnQtLTtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXRYICs9IDI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSgpIHtcclxuICAgICAgICAvLyBwYXNzIGluIHZlbCBvZiBlbnRpdHlcclxuICAgICAgICB0aGlzLnNlZzEuYS54Kys7XHJcbiAgICAgICAgdGhpcy5zZWcyLmZvbGxvdyh0aGlzLnRhcmdldFgsIHRoaXMudGFyZ2V0WSk7XHJcbiAgICAgICAgdGhpcy5zZWcyLnVwZGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuc2VnMS5mb2xsb3codGhpcy5zZWcyLmEueCwgdGhpcy5zZWcyLmEueSwgdGhpcy5zZWcyKTtcclxuICAgICAgICB0aGlzLnNlZzEudXBkYXRlKCk7XHJcbiAgICAgICAgLy8gbW92ZSBsZWcgdGVzdCBjb2RlXHJcbiAgICAgICAgaWYgKGNhbGN1bGF0ZUxlZ0Rpc3RhbmNlKHRoaXMuc2VnMSwgdGhpcy5zZWcyKSA+IHRoaXMubGVuKSB7Ly8gJiYgdGhpcy5sZWcxVGFyZ2V0LnJlYWNoQ291bnQgPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5yZWFjaENvdW50ID0gNzA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVhY2goKTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSB7XHJcbiAgICAgICAgdGhpcy5zZWcxLmRyYXcoY3R4KTtcclxuICAgICAgICB0aGlzLnNlZzIuZHJhdyhjdHgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRW50aXR5IHtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxuICAgIGg6IG51bWJlcjtcclxuICAgIHc6IG51bWJlcjtcclxuICAgIGxlZ3M6IExlZ1tdO1xyXG4gICAgdGlja3M6IG51bWJlcjtcclxuICAgIGNvbnN0cnVjdG9yKFg6IG51bWJlciwgWTogbnVtYmVyLCBIOiBudW1iZXIsIFc6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMudGlja3MgPSAxO1xyXG4gICAgICAgIHRoaXMueCA9IFg7XHJcbiAgICAgICAgdGhpcy55ID0gWTtcclxuICAgICAgICB0aGlzLmggPSBIO1xyXG4gICAgICAgIHRoaXMudyA9IFdcclxuICAgICAgICB0aGlzLmxlZ3MgPSBbXTtcclxuICAgICAgICBsZXQgbGVnMXNlZzEgPSBuZXcgU2VnbWVudCh0aGlzLnggKyB0aGlzLncsIHRoaXMueSwgMjAsIDIyNSAqIE1hdGguUEkvMTgwKTtcclxuICAgICAgICBsZXQgbGVnMXNlZzIgPSBuZXcgU2VnbWVudCgwLCAwLCAyMCwgMCwgbGVnMXNlZzEpO1xyXG4gICAgICAgIGxldCBsZWcyc2VnMSA9IG5ldyBTZWdtZW50KHRoaXMueCArIHRoaXMudywgdGhpcy55ICsgdGhpcy5oLCAyMCwgOTAgKiBNYXRoLlBJLzE4MCk7XHJcbiAgICAgICAgbGV0IGxlZzJzZWcyID0gbmV3IFNlZ21lbnQoMCwgMCwgMjAsIDAsIGxlZzJzZWcxKTtcclxuICAgICAgICBsZXQgbGVnM3NlZzEgPSBuZXcgU2VnbWVudCh0aGlzLngsIHRoaXMueSArIHRoaXMuaCwgMjAsIDkwICogTWF0aC5QSS8xODApO1xyXG4gICAgICAgIGxldCBsZWczc2VnMiA9IG5ldyBTZWdtZW50KDAsIDAsIDIwLCAwLCBsZWcyc2VnMSk7XHJcbiAgICAgICAgbGV0IGxlZzRzZWcxID0gbmV3IFNlZ21lbnQodGhpcy54LCB0aGlzLnksIDIwLCAyMjUgKiBNYXRoLlBJLzE4MCk7XHJcbiAgICAgICAgbGV0IGxlZzRzZWcyID0gbmV3IFNlZ21lbnQoMCwgMCwgMjAsIDAsIGxlZzFzZWcxKTtcclxuICAgICAgICB0aGlzLmxlZ3MucHVzaChuZXcgTGVnKFggKyB0aGlzLncgKyAxMCwgWSAtIDUsIGxlZzFzZWcxLCBsZWcxc2VnMikpOyBcclxuICAgICAgICB0aGlzLmxlZ3MucHVzaChuZXcgTGVnKFggLSB0aGlzLncgLSAxMCwgWSArIHRoaXMuaCArIDUsIGxlZzJzZWcxLCBsZWcyc2VnMikpO1xyXG4gICAgICAgIHRoaXMubGVncy5wdXNoKG5ldyBMZWcoWCAtIHRoaXMudyAtIDEwLCBZICsgdGhpcy5oICsgNSwgbGVnM3NlZzEsIGxlZzNzZWcyKSk7XHJcbiAgICAgICAgdGhpcy5sZWdzLnB1c2gobmV3IExlZyhYIC0gdGhpcy53ICsgMTAsIFkgLSA1LCBsZWc0c2VnMSwgbGVnNHNlZzIpKTtcclxuXHJcbiAgICAgICAgLy8gbGVnMnNlZzIuZm9sbG93KFgsIFkpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSgpIDogdm9pZCB7XHJcbiAgICAgICAgdGhpcy50aWNrcysrO1xyXG4gICAgICAgIC8vIGFyYml0cmF5IHZlbCBnb2VzIGhlcmVcclxuICAgICAgICB0aGlzLngrKztcclxuXHJcbiAgICAgICAgdGhpcy5sZWdzLmZvckVhY2gobGVnID0+IHtcclxuICAgICAgICAgICAgbGVnLnVwZGF0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXcgKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSA6IHZvaWQge1xyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBcImdyZXlcIjtcclxuICAgICAgICBjdHguZmlsbFJlY3QodGhpcy54LCB0aGlzLnksIHRoaXMudywgdGhpcy5oKTtcclxuXHJcbiAgICAgICAgdGhpcy5sZWdzLmZvckVhY2gobGVnID0+IHtcclxuICAgICAgICAgICAgbGVnLmRyYXcoY3R4KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY2FsY3VsYXRlTGVnRGlzdGFuY2UoU2VnMTogU2VnbWVudCwgU2VnMjogU2VnbWVudCk6IG51bWJlciB7XHJcbiAgICB2YXIgdjEgPSBTZWcyLmIueCAtIFNlZzEuYS54O1xyXG4gICAgdmFyIHYyID0gU2VnMi5iLnkgLSBTZWcxLmEueTtcclxuICAgIHZhciBkaXN0ID0gTWF0aC5zcXJ0KHYxKnYxICsgdjIqdjIpO1xyXG4gICAgcmV0dXJuIGRpc3Q7XHJcbn0iLCJpbXBvcnQgeyBTZWdtZW50IH0gZnJvbSBcIi4vU2VnbWVudFwiO1xyXG5pbXBvcnQgeyBFbnRpdHkgfSBmcm9tIFwiLi9FbnRpdHlcIjtcclxuLy8gc2V0IHVwIHN0YXRlXHJcbmNvbnN0IGNhbnZhcyA9IDxIVE1MQ2FudmFzRWxlbWVudD4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWVTY3JlZW4nKTtcclxuY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbmNvbnN0IHJlY3QgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbmxldCBtb3VzZVkgPSAwO1xyXG5sZXQgbW91c2VYID0gMDtcclxubGV0IHNlZzEgPSBuZXcgU2VnbWVudCgzMDAsIDIwMCwgMTAwLCAwKTtcclxubGV0IHNlZzIgPSBuZXcgU2VnbWVudCgwLCAwLCAxMDAsIDAsIHNlZzEpO1xyXG5sZXQgZW50ID0gbmV3IEVudGl0eSgwLCAyNTAsIDI1LCAyNSk7XHJcblxyXG5mdW5jdGlvbiB1cGRhdGUoKSA6IHZvaWQge1xyXG4gICAgZW50LnVwZGF0ZSgpO1xyXG4gICAgc2VnMi5mb2xsb3cobW91c2VYLCBtb3VzZVkpO1xyXG4gICAgLy8gc2VnMi5sb2NrVG9DaGlsZEIoc2VnMSk7XHJcbiAgICBzZWcyLnVwZGF0ZSgpO1xyXG4gICAgc2VnMS5mb2xsb3coc2VnMi5hLngsIHNlZzIuYS55LCBzZWcyKTtcclxuICAgIC8vIHNlZzEuYS54Kys7XHJcbiAgICBzZWcxLnVwZGF0ZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3KCkgOiB2b2lkIHtcclxuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuICAgIGVudC5kcmF3KGN0eCk7XHJcbiAgICBzZWcxLmRyYXcoY3R4KTtcclxuICAgIHNlZzIuZHJhdyhjdHgpO1xyXG59XHJcblxyXG4vLyBtYWluIGxvb3Bcclxuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XHJcbiAgICB1cGRhdGUoKTtcclxuICAgIGRyYXcoKTtcclxufSwgMTIpO1xyXG5cclxuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgIG1vdXNlWCA9IChldnQuY2xpZW50WCAtIHJlY3QubGVmdCkgLyAocmVjdC5yaWdodCAtIHJlY3QubGVmdCkgKiBjYW52YXMud2lkdGg7XHJcbiAgICBtb3VzZVkgPSAoZXZ0LmNsaWVudFkgLSByZWN0LnRvcCkgLyAocmVjdC5ib3R0b20gLSByZWN0LnRvcCkgKiBjYW52YXMuaGVpZ2h0O1xyXG59LCBmYWxzZSk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=