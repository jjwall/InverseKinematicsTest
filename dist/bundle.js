!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var n=function(){function t(t,e){this.x=t,this.y=e,this.magnitude=Math.sqrt(t^2+e^2)}return t.prototype.set=function(t,e){this.x=t,this.y=e,this.magnitude=Math.sqrt(t^2+e^2)},t.prototype.setMag=function(t){var e=Math.atan2(this.y,this.x);this.x=Math.cos(e)*t,this.y=Math.sin(e)*t,this.magnitude=t},t.prototype.heading=function(){return Math.atan2(this.y,this.x)},t.prototype.mult=function(t){this.x=this.x*t,this.y=this.y*t},t.add=function(e,i){return new t(e.x+i.x,e.y+i.y)},t.sub=function(e,i){return new t(e.x-i.x,e.y-i.y)},t}(),s=function(){function t(t,e,i,s,h){this.a=new n(t,e),this.len=i,this.angle=s;var a=this.len*Math.cos(this.angle),o=this.len*Math.sin(this.angle);this.b=new n(this.a.x+a,this.a.y+o),void 0!==h?(this.parent=h,this.a=new n(this.parent.b.x,this.parent.b.y)):this.parent=null,this.calculateB()}return t.prototype.follow=function(t,e,i){var s=new n(t,e),h=n.sub(s,this.a);this.angle=h.heading(),null!==this.parent?(h.setMag(this.len),h.mult(-1),this.a=n.add(s,h)):void 0!==i&&(i.a.x=this.b.x,i.a.y=this.b.y)},t.prototype.calculateB=function(){var t=this.len*Math.cos(this.angle),e=this.len*Math.sin(this.angle);this.b.set(this.a.x+t,this.a.y+e)},t.prototype.update=function(){this.calculateB()},t.prototype.draw=function(t){t.beginPath(),t.moveTo(this.a.x,this.a.y),t.lineTo(this.b.x,this.b.y),t.stroke()},t}(),h=function(){function t(t,e,i,n){this.len=i.len+n.len,this.reachCount=25,this.targetX=t,this.targetY=e,this.seg1=i,this.seg2=n}return t.prototype.reach=function(){this.reachCount>0&&(this.reachCount--,this.targetX+=2)},t.prototype.update=function(){this.seg1.a.x++,this.seg2.follow(this.targetX,this.targetY),this.seg2.update(),this.seg1.follow(this.seg2.a.x,this.seg2.a.y,this.seg2),this.seg1.update(),function(t,e){var i=e.b.x-t.a.x,n=e.b.y-t.a.y;return Math.sqrt(i*i+n*n)}(this.seg1,this.seg2)>this.len&&this.targetX<this.seg2.a.x&&(this.reachCount=40),this.reach()},t.prototype.draw=function(t){this.seg1.draw(t),this.seg2.draw(t)},t}(),a=function(){function t(t,e,i,n){this.ticks=1,this.x=t,this.y=e,this.h=i,this.w=n,this.legs=[];var a=new s(this.x+this.w,this.y,10,225*Math.PI/180),o=new s(0,0,10,0,a),r=new s(this.x+this.w,this.y+this.h,10,90*Math.PI/180),u=new s(0,0,10,0,r),l=new s(this.x,this.y+this.h,10,90*Math.PI/180),c=new s(0,0,10,0,r),f=new s(this.x,this.y,10,225*Math.PI/180),p=new s(0,0,10,0,a);this.legs.push(new h(t+this.w+10,e-5,a,o)),this.legs.push(new h(t-this.w-10,e+this.h+5,r,u)),this.legs.push(new h(t-this.w-10,e+this.h+5,l,c)),this.legs.push(new h(t-this.w+10,e-5,f,p))}return t.prototype.update=function(){this.ticks++,this.x++,this.legs.forEach(function(t){t.update()})},t.prototype.draw=function(t){t.fillStyle="grey",t.fillRect(this.x,this.y,this.w,this.h),this.legs.forEach(function(e){e.draw(t)})},t}();var o=document.getElementById("gameScreen"),r=o.getContext("2d"),u=o.getBoundingClientRect(),l=0,c=0,f=new s(300,200,100,0),p=new s(0,0,100,0,f),g=new a(0,250,25,25);setInterval(function(){g.update(),p.follow(c,l),p.update(),f.follow(p.a.x,p.a.y,p),f.update(),r.clearRect(0,0,o.width,o.height),g.draw(r),f.draw(r),p.draw(r)},12),o.addEventListener("mousemove",function(t){c=(t.clientX-u.left)/(u.right-u.left)*o.width,l=(t.clientY-u.top)/(u.bottom-u.top)*o.height},!1)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL1BWZWN0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1NlZ21lbnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0VudGl0eS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJQVmVjdG9yIiwiWCIsIlkiLCJ0aGlzIiwieCIsInkiLCJtYWduaXR1ZGUiLCJNYXRoIiwic3FydCIsInNldCIsInNldE1hZyIsIk1hZ25pdHVkZSIsImFuZ2xlIiwiYXRhbjIiLCJjb3MiLCJzaW4iLCJoZWFkaW5nIiwibXVsdCIsIk11bHRpcGxlIiwiYWRkIiwiQSIsIkIiLCJzdWIiLCJTZWdtZW50X1NlZ21lbnQiLCJTZWdtZW50IiwiTGVuIiwiQW5nbGUiLCJQYXJlbnQiLCJhIiwibGVuIiwiZHgiLCJkeSIsImIiLCJ1bmRlZmluZWQiLCJwYXJlbnQiLCJjYWxjdWxhdGVCIiwiZm9sbG93IiwidGFyZ2V0WCIsInRhcmdldFkiLCJjaGlsZCIsInRhcmdldCIsImRpciIsInVwZGF0ZSIsImRyYXciLCJjdHgiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJsaW5lVG8iLCJzdHJva2UiLCJMZWciLCJTZWcxIiwiU2VnMiIsInJlYWNoQ291bnQiLCJzZWcxIiwic2VnMiIsInJlYWNoIiwidjEiLCJ2MiIsImNhbGN1bGF0ZUxlZ0Rpc3RhbmNlIiwiRW50aXR5X0VudGl0eSIsIkVudGl0eSIsIkgiLCJXIiwidGlja3MiLCJoIiwidyIsImxlZ3MiLCJsZWcxc2VnMSIsIlBJIiwibGVnMXNlZzIiLCJsZWcyc2VnMSIsImxlZzJzZWcyIiwibGVnM3NlZzEiLCJsZWczc2VnMiIsImxlZzRzZWcxIiwibGVnNHNlZzIiLCJwdXNoIiwiZm9yRWFjaCIsImxlZyIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwiY2FudmFzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRleHQiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwibW91c2VZIiwibW91c2VYIiwiZW50Iiwic2V0SW50ZXJ2YWwiLCJjbGVhclJlY3QiLCJ3aWR0aCIsImhlaWdodCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJjbGllbnRYIiwibGVmdCIsInJpZ2h0IiwiY2xpZW50WSIsInRvcCIsImJvdHRvbSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FO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LElBT1gsSUFFSHFDLEVBQU9hLGlCQUFpQixZQUFhLFNBQVVDLEdBQzNDUCxHQUFVTyxFQUFJQyxRQUFVWCxFQUFLWSxPQUFTWixFQUFLYSxNQUFRYixFQUFLWSxNQUFRaEIsRUFBT1csTUFDdkVMLEdBQVVRLEVBQUlJLFFBQVVkLEVBQUtlLE1BQVFmLEVBQUtnQixPQUFTaEIsRUFBS2UsS0FBT25CLEVBQU9ZLFNBQ3ZFIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIi8qKiBpbXBsZW1lbnRhdGlvbiBvZiBKYXZhJ3MgUHJvY2Vzc2luZyBQVmVjdG9yICovXHJcbmV4cG9ydCBjbGFzcyBQVmVjdG9yIHtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxuICAgIG1hZ25pdHVkZTogbnVtYmVyO1xyXG4gICAgY29uc3RydWN0b3IoWDogbnVtYmVyLCBZOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnggPSBYO1xyXG4gICAgICAgIHRoaXMueSA9IFk7XHJcbiAgICAgICAgdGhpcy5tYWduaXR1ZGUgPSBNYXRoLnNxcnQoKFheMiArIFleMikpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBzZXQgeCBhbmQgeSB3aXRob3V0IGFsbG9jYXRpbmcgbmV3IFBWZWN0b3IgKi9cclxuICAgIHNldChYOiBudW1iZXIsIFk6IG51bWJlcikgOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnggPSBYO1xyXG4gICAgICAgIHRoaXMueSA9IFk7XHJcbiAgICAgICAgdGhpcy5tYWduaXR1ZGUgPSBNYXRoLnNxcnQoKFheMiArIFleMikpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBzZXRzIHRoZSBtYWduaXR1ZGUgKGxlbmd0aCkgb2YgdmVjdG9yXHJcbiAgICAgKiAgZmluZHMgbmV3IHggYW5kIHkgY29vcmRpbmF0ZXNcclxuICAgICAqL1xyXG4gICAgc2V0TWFnKE1hZ25pdHVkZTogbnVtYmVyKSA6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGFuZ2xlID0gTWF0aC5hdGFuMih0aGlzLnksIHRoaXMueCk7XHJcbiAgICAgICAgdGhpcy54ID0gTWF0aC5jb3MoYW5nbGUpICogTWFnbml0dWRlO1xyXG4gICAgICAgIHRoaXMueSA9IE1hdGguc2luKGFuZ2xlKSAqIE1hZ25pdHVkZTtcclxuICAgICAgICB0aGlzLm1hZ25pdHVkZSA9IE1hZ25pdHVkZTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogcmV0dXJucyBhbmdsZSBvZiB2ZWN0b3IgKi9cclxuICAgIGhlYWRpbmcoKSA6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguYXRhbjIodGhpcy55LCB0aGlzLngpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBtdWx0aXBsaWVzIHRoZSBjb21wb25lbnRzIG9mIHRoZSB2ZWMgYnkgc29tZSBudW1iZXIgICovXHJcbiAgICBtdWx0KE11bHRpcGxlOiBudW1iZXIpIDogdm9pZCB7XHJcbiAgICAgICAgdGhpcy54ID0gdGhpcy54ICogTXVsdGlwbGU7XHJcbiAgICAgICAgdGhpcy55ID0gdGhpcy55ICogTXVsdGlwbGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIHJldHVybnMgbmV3IHZlYyBvZiB2ZWMgQSBwbHVzIHZlYyBCICovXHJcbiAgICBzdGF0aWMgYWRkKEE6IFBWZWN0b3IsIEI6IFBWZWN0b3IpIDogUFZlY3RvciB7XHJcbiAgICAgICAgY29uc3QgeCA9IEEueCArIEIueDtcclxuICAgICAgICBjb25zdCB5ID0gQS55ICsgQi55O1xyXG4gICAgICAgIHJldHVybiBuZXcgUFZlY3Rvcih4LCB5KTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogcmV0dXJucyBuZXcgdmVjIG9mIHZlYyBCIHN1YnRyYWN0ZWQgZnJvbSB2ZWMgQSAqL1xyXG4gICAgc3RhdGljIHN1YihBOiBQVmVjdG9yLCBCOiBQVmVjdG9yKSA6IFBWZWN0b3Ige1xyXG4gICAgICAgIGNvbnN0IHggPSBBLnggLSBCLng7XHJcbiAgICAgICAgY29uc3QgeSA9IEEueSAtIEIueTtcclxuICAgICAgICByZXR1cm4gbmV3IFBWZWN0b3IoeCwgeSlcclxuICAgIH1cclxufSIsImltcG9ydCB7IFBWZWN0b3IgfSBmcm9tIFwiLi9QVmVjdG9yXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU2VnbWVudCB7XHJcbiAgICBhOiBQVmVjdG9yO1xyXG4gICAgYW5nbGU6IG51bWJlcjtcclxuICAgIGxlbjogbnVtYmVyO1xyXG4gICAgYjogUFZlY3RvcjtcclxuICAgIHBhcmVudDogU2VnbWVudDtcclxuICAgIGNvbnN0cnVjdG9yKFg6IG51bWJlciwgWTogbnVtYmVyLCBMZW46IG51bWJlciwgQW5nbGU6IG51bWJlciwgUGFyZW50PzogU2VnbWVudCkge1xyXG4gICAgICAgIHRoaXMuYSA9IG5ldyBQVmVjdG9yKFgsIFkpO1xyXG4gICAgICAgIHRoaXMubGVuID0gTGVuO1xyXG4gICAgICAgIHRoaXMuYW5nbGUgPSBBbmdsZTtcclxuXHJcbiAgICAgICAgY29uc3QgZHg6IG51bWJlciA9IHRoaXMubGVuICogTWF0aC5jb3ModGhpcy5hbmdsZSk7XHJcbiAgICAgICAgY29uc3QgZHk6IG51bWJlciA9IHRoaXMubGVuICogTWF0aC5zaW4odGhpcy5hbmdsZSk7XHJcbiAgICAgICAgdGhpcy5iID0gbmV3IFBWZWN0b3IodGhpcy5hLnggKyBkeCwgdGhpcy5hLnkgKyBkeSk7XHJcblxyXG4gICAgICAgIGlmIChQYXJlbnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IFBhcmVudFxyXG4gICAgICAgICAgICB0aGlzLmEgPSBuZXcgUFZlY3Rvcih0aGlzLnBhcmVudC5iLngsIHRoaXMucGFyZW50LmIueSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNhbGN1bGF0ZUIoKTtcclxuICAgIH1cclxuXHJcbiAgICBmb2xsb3codGFyZ2V0WDogbnVtYmVyLCB0YXJnZXRZOiBudW1iZXIsIGNoaWxkPzogU2VnbWVudCkge1xyXG4gICAgICAgIGxldCB0YXJnZXQgPSBuZXcgUFZlY3Rvcih0YXJnZXRYLCB0YXJnZXRZKTtcclxuICAgICAgICBsZXQgZGlyID0gUFZlY3Rvci5zdWIodGFyZ2V0LCB0aGlzLmEpO1xyXG4gICAgICAgIHRoaXMuYW5nbGUgPSBkaXIuaGVhZGluZygpO1xyXG5cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGFyZW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGRpci5zZXRNYWcodGhpcy5sZW4pO1xyXG4gICAgICAgICAgICBkaXIubXVsdCgtMSk7XHJcbiAgICAgICAgICAgIHRoaXMuYSA9IFBWZWN0b3IuYWRkKHRhcmdldCwgZGlyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChjaGlsZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmEueCA9IGNoaWxkLmIueDtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuYS55ID0gY2hpbGQuYi55O1xyXG4gICAgICAgICAgICAgICAgY2hpbGQuYS54ID0gdGhpcy5iLng7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5hLnkgPSB0aGlzLmIueTtcclxuICAgICAgICAgICAgICAgIC8vIGNoaWxkLmEuc2V0TWFnKE1hdGguc3FydCgodGhpcy5hLngpXjIgKyAodGhpcy5hLnkpXjIpKTtcclxuICAgICAgICAgICAgICAgIC8vIGNoaWxkLmIuc2V0TWFnKE1hdGguc3FydCgodGhpcy5iLngpXjIgKyAodGhpcy5iLnkpXjIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjYWxjdWxhdGVCKCkgOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBkeDogbnVtYmVyID0gdGhpcy5sZW4gKiBNYXRoLmNvcyh0aGlzLmFuZ2xlKTtcclxuICAgICAgICBjb25zdCBkeTogbnVtYmVyID0gdGhpcy5sZW4gKiBNYXRoLnNpbih0aGlzLmFuZ2xlKTtcclxuICAgICAgICB0aGlzLmIuc2V0KHRoaXMuYS54ICsgZHgsIHRoaXMuYS55ICsgZHkpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSgpIDogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVCKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhdyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkgOiB2b2lkIHtcclxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY3R4Lm1vdmVUbyh0aGlzLmEueCwgdGhpcy5hLnkpO1xyXG4gICAgICAgIGN0eC5saW5lVG8odGhpcy5iLngsIHRoaXMuYi55KTtcclxuICAgICAgICBjdHguc3Ryb2tlKCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBTZWdtZW50IH0gZnJvbSBcIi4vU2VnbWVudFwiO1xyXG5cclxuY2xhc3MgTGVnIHtcclxuICAgIHRhcmdldFg6IG51bWJlcjtcclxuICAgIHRhcmdldFk6IG51bWJlcjtcclxuICAgIGxlbjogbnVtYmVyO1xyXG4gICAgcmVhY2hDb3VudDogbnVtYmVyO1xyXG4gICAgc2VnMTogU2VnbWVudDtcclxuICAgIHNlZzI6IFNlZ21lbnQ7XHJcbiAgICBjb25zdHJ1Y3RvcihYOiBudW1iZXIsIFk6IG51bWJlciwgU2VnMTogU2VnbWVudCwgU2VnMjogU2VnbWVudCkge1xyXG4gICAgICAgIHRoaXMubGVuID0gU2VnMS5sZW4gKyBTZWcyLmxlbjtcclxuICAgICAgICB0aGlzLnJlYWNoQ291bnQgPSAyNTtcclxuICAgICAgICB0aGlzLnRhcmdldFggPSBYO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0WSA9IFk7XHJcbiAgICAgICAgdGhpcy5zZWcxID0gU2VnMTtcclxuICAgICAgICB0aGlzLnNlZzIgPSBTZWcyO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWNoKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJlYWNoQ291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVhY2hDb3VudC0tO1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldFggKz0gMjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKCkge1xyXG4gICAgICAgIC8vIHBhc3MgaW4gdmVsIG9mIGVudGl0eVxyXG4gICAgICAgIHRoaXMuc2VnMS5hLngrKztcclxuICAgICAgICB0aGlzLnNlZzIuZm9sbG93KHRoaXMudGFyZ2V0WCwgdGhpcy50YXJnZXRZKTtcclxuICAgICAgICB0aGlzLnNlZzIudXBkYXRlKCk7XHJcbiAgICAgICAgdGhpcy5zZWcxLmZvbGxvdyh0aGlzLnNlZzIuYS54LCB0aGlzLnNlZzIuYS55LCB0aGlzLnNlZzIpO1xyXG4gICAgICAgIHRoaXMuc2VnMS51cGRhdGUoKTtcclxuICAgICAgICAvLyBtb3ZlIGxlZyB0ZXN0IGNvZGVcclxuICAgICAgICBpZiAoY2FsY3VsYXRlTGVnRGlzdGFuY2UodGhpcy5zZWcxLCB0aGlzLnNlZzIpID4gdGhpcy5sZW4gJiYgdGhpcy50YXJnZXRYIDwgdGhpcy5zZWcyLmEueCkgey8vICYmIHRoaXMubGVnMVRhcmdldC5yZWFjaENvdW50ID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVhY2hDb3VudCA9IDQwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlYWNoKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhdyhjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkge1xyXG4gICAgICAgIHRoaXMuc2VnMS5kcmF3KGN0eCk7XHJcbiAgICAgICAgdGhpcy5zZWcyLmRyYXcoY3R4KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEVudGl0eSB7XHJcbiAgICB4OiBudW1iZXI7XHJcbiAgICB5OiBudW1iZXI7XHJcbiAgICBoOiBudW1iZXI7XHJcbiAgICB3OiBudW1iZXI7XHJcbiAgICBsZWdzOiBMZWdbXTtcclxuICAgIHRpY2tzOiBudW1iZXI7XHJcbiAgICBjb25zdHJ1Y3RvcihYOiBudW1iZXIsIFk6IG51bWJlciwgSDogbnVtYmVyLCBXOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnRpY2tzID0gMTtcclxuICAgICAgICB0aGlzLnggPSBYO1xyXG4gICAgICAgIHRoaXMueSA9IFk7XHJcbiAgICAgICAgdGhpcy5oID0gSDtcclxuICAgICAgICB0aGlzLncgPSBXXHJcbiAgICAgICAgdGhpcy5sZWdzID0gW107XHJcbiAgICAgICAgbGV0IGxlZzFzZWcxID0gbmV3IFNlZ21lbnQodGhpcy54ICsgdGhpcy53LCB0aGlzLnksIDEwLCAyMjUgKiBNYXRoLlBJLzE4MCk7XHJcbiAgICAgICAgbGV0IGxlZzFzZWcyID0gbmV3IFNlZ21lbnQoMCwgMCwgMTAsIDAsIGxlZzFzZWcxKTtcclxuICAgICAgICBsZXQgbGVnMnNlZzEgPSBuZXcgU2VnbWVudCh0aGlzLnggKyB0aGlzLncsIHRoaXMueSArIHRoaXMuaCwgMTAsIDkwICogTWF0aC5QSS8xODApO1xyXG4gICAgICAgIGxldCBsZWcyc2VnMiA9IG5ldyBTZWdtZW50KDAsIDAsIDEwLCAwLCBsZWcyc2VnMSk7XHJcbiAgICAgICAgbGV0IGxlZzNzZWcxID0gbmV3IFNlZ21lbnQodGhpcy54LCB0aGlzLnkgKyB0aGlzLmgsIDEwLCA5MCAqIE1hdGguUEkvMTgwKTtcclxuICAgICAgICBsZXQgbGVnM3NlZzIgPSBuZXcgU2VnbWVudCgwLCAwLCAxMCwgMCwgbGVnMnNlZzEpO1xyXG4gICAgICAgIGxldCBsZWc0c2VnMSA9IG5ldyBTZWdtZW50KHRoaXMueCwgdGhpcy55LCAxMCwgMjI1ICogTWF0aC5QSS8xODApO1xyXG4gICAgICAgIGxldCBsZWc0c2VnMiA9IG5ldyBTZWdtZW50KDAsIDAsIDEwLCAwLCBsZWcxc2VnMSk7XHJcbiAgICAgICAgdGhpcy5sZWdzLnB1c2gobmV3IExlZyhYICsgdGhpcy53ICsgMTAsIFkgLSA1LCBsZWcxc2VnMSwgbGVnMXNlZzIpKTsgXHJcbiAgICAgICAgdGhpcy5sZWdzLnB1c2gobmV3IExlZyhYIC0gdGhpcy53IC0gMTAsIFkgKyB0aGlzLmggKyA1LCBsZWcyc2VnMSwgbGVnMnNlZzIpKTtcclxuICAgICAgICB0aGlzLmxlZ3MucHVzaChuZXcgTGVnKFggLSB0aGlzLncgLSAxMCwgWSArIHRoaXMuaCArIDUsIGxlZzNzZWcxLCBsZWczc2VnMikpO1xyXG4gICAgICAgIHRoaXMubGVncy5wdXNoKG5ldyBMZWcoWCAtIHRoaXMudyArIDEwLCBZIC0gNSwgbGVnNHNlZzEsIGxlZzRzZWcyKSk7XHJcblxyXG4gICAgICAgIC8vIGxlZzJzZWcyLmZvbGxvdyhYLCBZKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoKSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudGlja3MrKztcclxuICAgICAgICAvLyBhcmJpdHJheSB2ZWwgZ29lcyBoZXJlXHJcbiAgICAgICAgdGhpcy54Kys7XHJcblxyXG4gICAgICAgIHRoaXMubGVncy5mb3JFYWNoKGxlZyA9PiB7XHJcbiAgICAgICAgICAgIGxlZy51cGRhdGUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkgOiB2b2lkIHtcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gXCJncmV5XCI7XHJcbiAgICAgICAgY3R4LmZpbGxSZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLncsIHRoaXMuaCk7XHJcblxyXG4gICAgICAgIHRoaXMubGVncy5mb3JFYWNoKGxlZyA9PiB7XHJcbiAgICAgICAgICAgIGxlZy5kcmF3KGN0eCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZUxlZ0Rpc3RhbmNlKFNlZzE6IFNlZ21lbnQsIFNlZzI6IFNlZ21lbnQpOiBudW1iZXIge1xyXG4gICAgdmFyIHYxID0gU2VnMi5iLnggLSBTZWcxLmEueDtcclxuICAgIHZhciB2MiA9IFNlZzIuYi55IC0gU2VnMS5hLnk7XHJcbiAgICB2YXIgZGlzdCA9IE1hdGguc3FydCh2MSp2MSArIHYyKnYyKTtcclxuICAgIHJldHVybiBkaXN0O1xyXG59IiwiaW1wb3J0IHsgU2VnbWVudCB9IGZyb20gXCIuL1NlZ21lbnRcIjtcclxuaW1wb3J0IHsgRW50aXR5IH0gZnJvbSBcIi4vRW50aXR5XCI7XHJcbi8vIHNldCB1cCBzdGF0ZVxyXG5jb25zdCBjYW52YXMgPSA8SFRNTENhbnZhc0VsZW1lbnQ+IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lU2NyZWVuJyk7XHJcbmNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5jb25zdCByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5sZXQgbW91c2VZID0gMDtcclxubGV0IG1vdXNlWCA9IDA7XHJcbmxldCBzZWcxID0gbmV3IFNlZ21lbnQoMzAwLCAyMDAsIDEwMCwgMCk7XHJcbmxldCBzZWcyID0gbmV3IFNlZ21lbnQoMCwgMCwgMTAwLCAwLCBzZWcxKTtcclxubGV0IGVudCA9IG5ldyBFbnRpdHkoMCwgMjUwLCAyNSwgMjUpO1xyXG5cclxuZnVuY3Rpb24gdXBkYXRlKCkgOiB2b2lkIHtcclxuICAgIGVudC51cGRhdGUoKTtcclxuICAgIHNlZzIuZm9sbG93KG1vdXNlWCwgbW91c2VZKTtcclxuICAgIC8vIHNlZzIubG9ja1RvQ2hpbGRCKHNlZzEpO1xyXG4gICAgc2VnMi51cGRhdGUoKTtcclxuICAgIHNlZzEuZm9sbG93KHNlZzIuYS54LCBzZWcyLmEueSwgc2VnMik7XHJcbiAgICAvLyBzZWcxLmEueCsrO1xyXG4gICAgc2VnMS51cGRhdGUoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZHJhdygpIDogdm9pZCB7XHJcbiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcbiAgICBlbnQuZHJhdyhjdHgpO1xyXG4gICAgc2VnMS5kcmF3KGN0eCk7XHJcbiAgICBzZWcyLmRyYXcoY3R4KTtcclxufVxyXG5cclxuLy8gbWFpbiBsb29wXHJcbnNldEludGVydmFsKGZ1bmN0aW9uKCkge1xyXG4gICAgdXBkYXRlKCk7XHJcbiAgICBkcmF3KCk7XHJcbn0sIDEyKTtcclxuXHJcbmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICBtb3VzZVggPSAoZXZ0LmNsaWVudFggLSByZWN0LmxlZnQpIC8gKHJlY3QucmlnaHQgLSByZWN0LmxlZnQpICogY2FudmFzLndpZHRoO1xyXG4gICAgbW91c2VZID0gKGV2dC5jbGllbnRZIC0gcmVjdC50b3ApIC8gKHJlY3QuYm90dG9tIC0gcmVjdC50b3ApICogY2FudmFzLmhlaWdodDtcclxufSwgZmFsc2UpO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9